define(['jquery','matchMedia','mage/translate','body-scroll-lock','masonry'],function($,mediaCheck,translate,bodyScrollLock,Masonry){'use strict';var $body=$('body');var $navToggle=$body.find('.header .nav-toggle');var $navMaster=$body.find('.navigation');var $mobileMenuLoaded=false;var toggleScroll=false;$navToggle.on('click',function(){$('body, html').toggleClass('nav-open');if(toggleScroll===false){blockScrollIOS();toggleScroll=true;}else{bodyScrollLock.clearAllBodyScrollLocks();toggleScroll=false;}});var blockScrollIOS=function(){bodyScrollLock.disableBodyScroll(document.querySelector(".navigation"),{allowTouchMove:function(el){while(el&&el!==document.body){if(el.classList.contains('.navigation__list')!==null||el.classList.contains('.submenu')!==null){return true}
el=el.parentNode}},});}
var lktMobileMenu=function(){if(window.innerWidth<1024&&$mobileMenuLoaded==false){$navMaster.find('.navigation__list').attr('data-submenu',1).prepend('<li class="nav-title"><span class="nav-title__link nav-title__text">Todas las categorias</span></li>');$('.navigation .submenu').each(function(index,element){var c=index+2,prevLink=$(this).prev('a'),prevMenu=prevLink.closest('ul'),ancestorBack=$(this).parent().parent().find('.nav-title__text'),prevLinkUrl=(prevLink.attr('href')!='')?prevLink.attr('href'):'#';prevLink.attr('data-open',c);var extraLinks='<li class="nav-back">'+'<a href="#" class="js-nav-back nav-back__link" data-open="'+prevMenu.data('submenu')+'">'+'Volver a '+ancestorBack.text()+'</a></li>'+'<li class="nav-title"><a href="'+prevLinkUrl+'" class="nav-title__link">Ver <span class="nav-title__text">'+
prevLink.text()+'</span></a></li>';$(this).prepend(extraLinks).attr('data-submenu',c).insertAfter('.navigation__list');});$navMaster.on('click','a',function(e){var submenuToOpen=parseInt($(this).data('open'));if(submenuToOpen>0){e.preventDefault();if($(this).hasClass('js-nav-back')){$navMaster.find(".nav-visible").removeClass('nav-visible');$navMaster.find("[data-submenu="+$(this).data('open')+"]").removeClass('nav-move-left').addClass('nav-visible');}else{$(this).closest('[data-submenu]').addClass('nav-move-left').removeClass('nav-visible');$navMaster.find("[data-submenu="+submenuToOpen+"]").addClass('nav-visible');}}});$mobileMenuLoaded=true;$('.level0.submenu').each(function(index,element){if($(this).find('li.level1').length>=5){$(this).removeProp('style');$(this).find('li.level1').removeProp('style');}});}else if(window.innerWidth>=1024&&$mobileMenuLoaded===true){location.reload();$mobileMenuLoaded=false;$('body, html').removeClass('nav-open');}else if(window.innerWidth>=1024){$('.level0.submenu').each(function(index,element){if($('li.level1',this).length>=5){var menuMasonry=new Masonry(element,{itemSelector:'li.level1',percentPosition:true,containerStyle:{position:'absolute'}});}});}}
lktMobileMenu();window.addEventListener("resize",lktMobileMenu,false);});